NewBCPL/CodeLister.md
```

```
# CodeLister Class Documentation

## Overview

The `CodeLister` class is responsible for generating human-readable listings of code and data sections. It provides methods to format and display assembly instructions and data in a structured manner.

---

## Key Responsibilities

1. **Code Section Listing**:
   - Formats assembly instructions into a readable table with address, hex encoding, and assembly text.
   - Includes labels defined at specific addresses.

2. **Data Section Listing**:
   - Formats read-only and read-write data sections generated by the `DataGenerator`.

---

## Methods

### `generate_code_listing`
Generates a formatted listing of assembly instructions.

#### Parameters:
- `instructions`: A vector of `Instruction` objects representing the assembly instructions.
- `defined_labels`: A map of label names to their corresponding addresses.

#### Returns:
- A string containing the formatted code section listing.

#### Features:
- Displays address, hex encoding, and assembly text.
- Includes labels defined at specific addresses.

---

### `generate_data_listing`
Generates a formatted listing of data sections.

#### Parameters:
- `data_generator`: A reference to the `DataGenerator` object responsible for generating data sections.

#### Returns:
- A string containing the formatted data section listing.

#### Features:
- Displays read-only data (e.g., string literals, floating-point literals).
- Displays read-write data (e.g., static variables).

---

## Example Usage

### Code Section Listing
```cpp
std::vector<Instruction> instructions = ...; // Populate with assembly instructions
std::unordered_map<std::string, size_t> labels = ...; // Populate with label definitions

CodeLister code_lister;
std::string listing = code_lister.generate_code_listing(instructions, labels);
std::cout << listing;
```

### Data Section Listing
```cpp
DataGenerator data_generator = ...; // Initialize and populate data generator

CodeLister code_lister;
std::string data_listing = code_lister.generate_data_listing(data_generator);
std::cout << data_listing;
```

---

## Summary

The `CodeLister` class is a utility for generating readable listings of assembly code and data sections. It enhances debugging and analysis by providing structured and annotated outputs of the generated code and data.