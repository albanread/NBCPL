// Test program using VEC allocation expressions (not GETVEC function calls)
// to verify that vector allocation and freeing works through the HeapManager

LET START() BE
{
    WRITEF("=== VEC Expression Test ===*N")

    // Test 1: VEC allocation expression
    WRITEF("Test 1: VEC allocation and free*N")
    LET vec = VEC 5

    // Fill the vector with data
    vec!0 := 10
    vec!1 := 20
    vec!2 := 30

    WRITEF("Vector allocated and filled: vec[0]=%d, vec[1]=%d, vec[2]=%d*N",
           vec!0, vec!1, vec!2)

    // Free the vector (should go through HeapManager)
    WRITEF("Freeing vector with FREEVEC...*N")
    FREEVEC(vec)
    WRITEF("Vector freed*N")

    // Test 2: Try double-free to test detection
    WRITEF("*NTest 2: Attempting double-free*N")
    WRITEF("Attempting to free same vector again...*N")
    FREEVEC(vec)
    WRITEF("ERROR: Double-free succeeded - this should not happen!*N")

    WRITEF("*N=== Test Complete ===*N")
}
